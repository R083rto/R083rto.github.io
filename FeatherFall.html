<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Oscar Wibergs Portfolio</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		 
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		
		<link rel="stylesheet" href="style.css" />
		<noscript><link rel="stylesheet" href="style.css" /></noscript>
	
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">Oscar Wiberg</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
						<li><a href="index.html">Back</a></li>
						<li class="active"><a href="DonutProject.html">Featherfall</a></li>
						</ul>
						<ul class="icons">
							<li><a href="https://linkedin.com/in/oscar-wiberg-30b557178" class="icon brands fa-linkedin"><span class="label">linkedin</span></a></li>
							<li><a href="https://github.com/R083rto" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
							<li><a href="images/resume.pdf" class="button primary fit">CV</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<h1> 
										Featherfall
									</h1>
								<p>Featherfall is a project that I and 11 others worked on in 7 weeks using the Unity engine at Future games.  FeatherFall plays like an ability-based beat them up where you traverse the Greenland tundra. I mainly worked on the player character but also touched on the AI. 
									</p>
								</header>
								<div class="wrapper">
									<div class="videowrapper">	
										<iframe width="560" height="315" src="https://www.youtube.com/embed/OplUY59rj5I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
									</div>
								</div>
								<header class="minor">
										<H2>AI</H2>
										</header>
										<div>
											<div>
												<p>AI system that caused the first Enemies to arrive to surround the player up close while all the others are to encircle around its target when there is no space up close. </p>
											</div>
											<div class="box alt">
													<div class="row gtr-50 gtr-uniform">
															<div class="col-4"></div>
														<div class="col-4">
																				<video width="100%" height="auto"  autoplay loop muted>
																						<source src="images/encircle.mp4" type="video/mp4">
																							<p>Ops, your browser can't display this</p>
																				</video>
																	</div>
																	<div class="col-4"></div>
													</div>
											
										</div>
										<header>
											<p></p>
										</header>
								<button class="accordion">Code snipet</button>
								<div class="panel">
								<pre><code class="prettyprint"style="font-size:12px">
public class MoveAround : MonoBehaviour
{
    public int segments = 10;
    public float innerRadius = 2;
    public float outerRadiusMin = 1.5f;
    public float outerRadiusMax = 10f;

    float deltaTheta;
    Vector3 targetLocation;
    
    bool isInPlayMode = false;

    float rotationTimer;
    public List<GameObject> enemy = new List<GameObject>();

    private void Start()
    {
        targetLocation = transform.position;
        deltaTheta = (2 * Mathf.PI) / segments;
        isInPlayMode = true;
    }

    private void Update()
    {
        rotationTimer += Time.deltaTime;
        targetLocation = transform.position;
        
        for(int i = 0; i &lt enemy.Count; i++)
        {
            if (i &lt segments)
            {
                SendAiToInnerPositionDependentOnIndex(i);
            }
            else
                SendAiToOuterPositionDependantOnIndex(i);
        }
    }

    Vector3 GetPositionAroundPlayer(int index, float extraRadius, bool shouldRotate = false)
    {
        float theta = deltaTheta * index;

        if (!shouldRotate)
            return targetLocation + new Vector3((innerRadius + extraRadius) * 
                Mathf.Cos(theta),
                0f,
                (innerRadius + extraRadius) * Mathf.Sin(theta));
        else
            return targetLocation + new Vector3((innerRadius + extraRadius) * 
                Mathf.Cos(rotationTimer + index) * Random.Range(outerRadiusMin, outerRadiusMax),
                0f, 
                (innerRadius + extraRadius) * Mathf.Sin(rotationTimer + index) * Random.Range(outerRadiusMin, outerRadiusMax));
    }
    
    void SendAiToPosition()
    {
        for(int i = 0;i &lt segments;i++)
        {
            float smalestdistance = Mathf.Infinity;
            Vector3 target = Vector3.zero;
            

            if (!enemy[i].activeInHierarchy)
            {
                GameObject tmp = enemy[i];
                enemy[i] = enemy[enemy.Count - 1];
                enemy[enemy.Count - 1] = tmp;
                enemy.RemoveAt(enemy.Count - 1);
            }

            for (int y = 0; y &lt segments; y++)
            {
                if (!enemy[i])
                    continue;

                Vector3 distance = enemy[i].transform.position - GetPositionAroundPlayer(i,0);

                if(distance.sqrMagnitude &lt smalestdistance)
                {
                    smalestdistance = distance.sqrMagnitude;
                    target = GetPositionAroundPlayer(i, 0);
                }
            }
            
            enemy[i].GetComponent<UnityEngine.AI.NavMeshAgent>().SetDestination(target);
        }
        if(segments &lt enemy.Count)
        {
            for(int i = segments; i &lt enemy.Count; i++)
            {
                enemy[i].GetComponent<UnityEngine.AI.NavMeshAgent>().SetDestination(GetPositionAroundPlayer(i-segments,0,true));
            }
        }
    }
    void SendAiToOuterPositionDependantOnIndex(int index)
    {
        enemy[index].GetComponent<UnityEngine.AI.NavMeshAgent>().SetDestination(GetPositionAroundPlayer(index - segments, 0, true));
    }

    void SendAiToInnerPositionDependentOnIndex(int index)
    {
        float smalestdistance = Mathf.Infinity;
        Vector3 target = Vector3.zero;

        int targetIndex = 0;

        if (!enemy[index].activeInHierarchy)
        {
            GameObject tmp = enemy[index];
            enemy[index] = enemy[enemy.Count - 1];
            enemy[enemy.Count - 1] = tmp;
            enemy.RemoveAt(enemy.Count - 1);
        }

        for (int y = 0; y &lt segments; y++)
        {
            if (!enemy[index])
                continue;

            Vector3 distance = enemy[index].transform.position - GetPositionAroundPlayer(index, 0);

            if (distance.sqrMagnitude &lt smalestdistance)
            {
                smalestdistance = distance.sqrMagnitude;
                target = GetPositionAroundPlayer(index, 0);
                targetIndex = y;
            }
        }

        enemy[index].GetComponent<UnityEngine.AI.NavMeshAgent>().SetDestination(target);
          
    }

    void CircularPos()
    {
        float theta = 0;
        for(int i = 0; i &lt enemy.Count; i++)
        {
            Vector3 segPos = targetLocation + new Vector3(innerRadius * Mathf.Cos(theta), 0f, innerRadius * Mathf.Sin(theta));
            enemy[i].GetComponent<UnityEngine.AI.NavMeshAgent>().SetDestination(segPos);
            theta += deltaTheta;
        }
    }

    private void OnDrawGizmos()
    {
        if (!isInPlayMode)
            return;
        for(int i = 0; i &lt segments; i++)
        {
            Gizmos.color = Color.red;
            Gizmos.DrawSphere(GetPositionAroundPlayer(i,0),0.2f);

        }
        Gizmos.color = Color.blue;
		Gizmos.DrawLine(gameObject.transform.position + 
		new Vector3(0, 0, innerRadius*outerRadiusMin), gameObject.transform.position + 
		new Vector3(0, 0, innerRadius * outerRadiusMax));
    }
}
								</code></pre>
								</div>
								<header class="minor">
										<H2>Placeholder headlineg</H2>
										</header>
								<p>placeholder text</p>
								<button class="accordion">Code snipet</button>
								<div class="panel">
								<pre><code class="prettyprint">
code her plz
								</code></pre>
							
								</div>
							</section>

					</div>


				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>
			<script>
				var acc = document.getElementsByClassName("accordion");
				var i;

				for (i = 0; i < acc.length; i++) {
				acc[i].addEventListener("click", function() {
					this.classList.toggle("active");
					var panel = this.nextElementSibling;
					if (panel.style.maxHeight){
					panel.style.maxHeight = null;
					} else {
					panel.style.maxHeight = panel.scrollHeight + "px";
					} 
				});
				}
			</script>

	</body>



</html>